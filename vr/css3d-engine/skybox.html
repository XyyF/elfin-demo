<html>
  <head></head>
  <body>
    <div id="container"></div>
    <script src="./css3d-engine.min.js"></script>
    <script>
      window.onload = initCSS3D;

      function initCSS3D() {
        var s = new C3D.Stage();
        s.size(window.innerWidth, window.innerHeight).update();
        document.getElementById('container').appendChild(s.el);

        var box = new C3D.Skybox();
        box.size(954).position(0, 0, 0).material({
          front: { image: "images/screen.jpeg" },
          back: { image: "images/screen.jpeg" },
          left: { image: "images/screen.jpeg" },
          right: { image: "images/screen.jpeg" },
          up: { image: "images/screen.jpeg" },
          down: { image: "images/screen.jpeg" },

        }).update();
        s.addChild(box);

        function loop() {
          angleX += (curMouseX - lastMouseX + lastAngleX - angleX) * 0.3;
          angleY += (curMouseY - lastMouseY + lastAngleY - angleY) * 0.3;

          s.camera.rotation(angleY, -angleX, 0).updateT();
          requestAnimationFrame(loop);
        }

        loop();

        var lastMouseX = 0;
        var lastMouseY = 0;
        var curMouseX = 0;
        var curMouseY = 0;
        var lastAngleX = 0;
        var lastAngleY = 0;
        var angleX = 0;
        var angleY = 0;

        document.addEventListener("mousedown", mouseDownHandler);
        document.addEventListener("mouseup", mouseUpHandler);

        function mouseDownHandler(evt) {
          lastMouseX = curMouseX = evt.pageX;
          lastMouseY = curMouseY = evt.pageY;
          lastAngleX = angleX;
          lastAngleY = angleY;

          document.addEventListener("mousemove", mouseMoveHandler);
        }

        function mouseMoveHandler(evt) {
          curMouseX = evt.pageX;
          curMouseY = evt.pageY;
        }

        function mouseUpHandler(evt) {
          curMouseX = evt.pageX;
          curMouseY = evt.pageY;

          document.removeEventListener("mousemove", mouseMoveHandler);
        }

        function initPoints() {
          var hotPoints = [
            {
              position: {
                x: 0,
                y: 0,
                z: -476
              },
              detail: {
                "title": "信息点1"
              }
            },
            {
              position: {
                x: 0,
                y: 0,
                z: 476
              },
              detail: {
                "title": "信息点2"
              }
            }
          ];
          var poiObjects = [];
          for (var i = 0; i < hotPoints.length; i++) {
            var _p = new C3D.Plane();

            _p.size(207, 162).position(hotPoints[i].position.x, hotPoints[i].position.y, hotPoints[i].position.z).material({
              image: "images/hot.jpeg",
              repeat: 'no-repeat',
              bothsides: true,//注意这个两面贴图的属性
            }).update();
            s.addChild(_p);

            _p.el.detail = hotPoints[i].detail;

            _p.on("click", function (e) {
              console.log(e.target.detail.title);
            })
          }
        }
        initPoints();
      }
    </script>
  </body>
</html>